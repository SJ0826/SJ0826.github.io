---
title: "[Next.js 13] í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ì •ë§ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œë§Œ ë Œë”ë§ ë ê¹Œ ?"
excerpt: "í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ prerendering ì—ëŸ¬ê°€ ë°œìƒí•œ ì´ìœ "
toc: true
toc_sticky: true
sidebar:
nav: "docs"

categories:
  - Nextjs
tags:
  - [
      "prerendering",
      "ì„œë²„ ì»´í¬ë„ŒíŠ¸",
      "use client",
      "ì—ëŸ¬"
    ]
last_modified_at: 2024-07-10T08:06:00-05:00
---

## â—¾ï¸ë¬¸ì œ ë°œìƒ

react-draft-wysiwyg ë¥¼ ì‚¬ìš©í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì— importí–ˆìŠµë‹ˆë‹¤.
í˜ì´ì§€ëŠ” ì„±ê³µì ìœ¼ë¡œ ë Œë”ë§ ë˜ì—ˆì§€ë§Œ í„°ë¯¸ë„ì—ì„œ ì—ëŸ¬ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë¹Œë“œì‹œì—ë„ ë™ì¼í•œ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

![image](/assets/image/posts/nextjs-prerendering-error.png)

`use client`ë¥¼ ìµœìƒë‹¨ì— ì„ ì–¸í–ˆì—ˆê¸°ì—, í´ë¦¬ì´ì–¸íŠ¸ ì»´í¬ë„Œë¼ê³  ìƒê°í–ˆê³  ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë‚  ë²•í•œ í”„ë¦¬ë Œë”ë§ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒì´ ì´í•´ê°€ ê°€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.


## â—¾ï¸ ë¬¸ì œ ì›ì¸

ë¬¸ì œê°€ ë°œìƒí•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- Next.js 13 ì»´í¬ë„ŒíŠ¸ëŠ” **ì„œë²„ì—ì„œ ì‚¬ì „ ë Œë”ë§**ë˜ê³  **í´ë¼ì´ì–¸íŠ¸ì—ì„œ í•˜ì´ë“œë ˆì´ì…˜**ëœë‹¤.
- ë”°ë¼ì„œ `use client` ë¥¼ ì„ ì–¸í•œë‹¤ê³ í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ë Œë”ë§ ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ì—ì„œ windowê°ì²´ì— ì ‘ê·¼í•˜ëŠ”ë°, ì„œë²„ì—ì„œ ì‚¬ì „ ë Œë”ë§ë˜ëŠ” ê³¼ì •ì—ì„œ windowê°ì²´ë¥¼ ì°¾ì§€ ëª»í•´ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.
í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œë§Œ ì‹¤í–‰ë˜ì–´ì•¼í•˜ëŠ” ì½”ë“œëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

## â—¾ï¸ ë¬¸ì œ í•´ê²°

### âœ”ï¸ ë°©ë²• 1. dynamic import (ë™ì  ì„í¬íŠ¸)ë¡œ SSR ì˜µì…˜ ë„ê¸°

```ts
const NoticeForm = dynamic(() => import('@/components/notice/NoticeForm'), {
  ssr: false,
});
```

Next.js ì˜ **dynamic import** ê¸°ëŠ¥ì„ í™œìš©í•´ **ì„œë²„ ì¸¡ ë Œë”ë§ì„ ë¹„í™œì„±í™”**í–ˆìŠµë‹ˆë‹¤.
dynamic importëŠ” ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì—ì„œ ì„ ì–¸í•´ì•¼í•©ë‹ˆë‹¤.

ë‹¤ë§Œ ì´ ë°©ë²•ì€ í•´ë‹¹ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ì ìœ¼ë¡œ importí•´ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆì—ˆê³ , ì—ëŸ¬ ì›ì¸ì„ ì°¾ë˜ ì¤‘ ì „ì—­ìœ¼ë¡œ ì„¤ì •í•´ì£¼ëŠ” ë°©ë²•ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

### âœ”ï¸ ë°©ë²• 2. ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•œ custom hook ë§Œë“¤ê¸°

ë™ì  ì„í¬íŠ¸ ë§¤ì»¤ë‹ˆì¦˜ì„ ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ ë°˜ë³µì ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ëŒ€ì‹ , **ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•´ ì „ì—­ì—ì„œ ê´€ë¦¬**í•˜ëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤.

useEffectì™€ useState í›…ì„ ì‚¬ìš©í•œ ì»¤ìŠ¤í…€ í›…ì„ í†µí•´ í´ë¼ì´ì–¸íŠ¸ í™˜ê²½ì„ ì‹¤í–‰ì¡°ê±´ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

ì´ë ‡ê²Œí•˜ë©´ ì„œë²„ì—ì„œì˜ ì‚¬ì „ë Œë”ë§ê³¼ í´ë¼ì´ì–¸íŠ¸ì˜ ì²«ë²ˆì§¸ ë Œë”ë§ì´ ì¼ì¹˜í•´ í•˜ì´ë“œë ˆì´ì…˜ ì˜¤ë¥˜ë„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ğŸ’¾ useIsClient.tsx**
```ts
'use client';

import { createContext, useContext, useEffect, useState } from 'react';

const IsClientCtx = createContext(false);

export const IsClientCtxProvider = ({
  children,
}: {
  children: React.ReactNode;
}) => {
  const [isClient, setIsClient] = useState(false);
  useEffect(() => setIsClient(true), []);
  return (
    <IsClientCtx.Provider value={isClient}>{children}</IsClientCtx.Provider>
  );
};

export function useIsClient() {
  return useContext(IsClientCtx);
}
```

**ğŸ’¾ app/layout.tsx**
```ts
import type { Metadata } from 'next';
import './globals.css';
import { IsClientCtxProvider } from '@/hooks/useIsClient';

export const metadata: Metadata = {
  title: 'Project',
  description: 'Generated by create next app',
};


export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body>
        <IsClientCtxProvider>
					{children}
        </IsClientCtxProvider>
      </body>
    </html>
  );
}
```

**ğŸ’¾ ì‚¬ìš©ì˜ˆì‹œ**
```ts
import { useIsClient } from './is-client-ctx';

function MyComponent() {
  const isClient = useIsClient();
  const scrollPosition = useScrollPosition(); // ì˜ˆì‹œë¥¼ ìœ„í•œ ê°€ìƒ í›…

  return (
    <>
      {scrollPosition >= 0 && <FirstModule />}
      {isClient && scrollPosition >= window.innerHeight * 2 && <SecondModule />}
    </>
  );
}

```

useIsClient.tsx í›…ì„ í†µí•´ ì„œë²„ì—ì„œ ë Œë”ë§í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì„ ë¨¼ì € ë Œë”ë§ í›„, í´ë¼ì´ì–¸íŠ¸ ì¡°ê±´ì— ë”°ë¼ ì—…ë°ì´íŠ¸ (ë‘ë²ˆì§¸ ë Œë”ë§)ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ ë°©ì‹ì„ í†µí•´ í•˜ì´ë“œë ˆì´ì…˜ ì˜¤ë¥˜ë¥¼ í”¼í•˜ë©´ì„œ í•„ìš”í•œ ê²½ìš° í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

## ì°¸ê³ 
- [stackoverflow - next-js-13-window-is-not-defined](https://stackoverflow.com/questions/75692116/next-js-13-window-is-not-defined)
